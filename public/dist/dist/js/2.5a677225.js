(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{LSxn:function(t,n,a){"use strict";var e=a("rFp3"),o=a.n(e);o.a},OWlr:function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(n){t.dialog=n},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Cancel this booking?")]),a("v-card-text",[t._v("This cannot be undone.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red",flat:"flat"},nativeOn:{click:function(n){return t.cancelBooking(n)}}},[t._v("Cancel My Booking")]),a("v-btn",{attrs:{color:"default",flat:"flat"},nativeOn:{click:function(n){t.dialog=!1}}},[t._v("Back")])],1)],1)],1),a("h1",[t._v(" Bookings ")]),a("v-tabs",{attrs:{dark:"","slider-color":"yellow"},model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},t._l(t.tabs,function(n){return a("v-tab",{key:n.name,attrs:{ripple:""},on:{click:function(a){t.fetchBookings(n.name)}}},[t._v("\n      "+t._s(n.name)+"\n    ")])})),t.bookings.length>0?a("ul",t._l(t.bookings,function(n){return a("v-card",{key:n.id},[n.restaurant.thumb?a("v-card-media",{attrs:{src:n.restaurant.thumb,height:"200px"}}):t._e(),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(n.restaurant.name))]),a("h3",[t._v(" "+t._s(n.restaurant.location.address)+" ")]),a("h3",[t._v(" "+t._s(n.restaurant.cuisines)+" ")]),a("a",{attrs:{href:n.menu_url}},[a("v-icon",[t._v("local_dining")]),t._v(" Menu")],1),a("br"),a("a",{attrs:{href:n.photos_url}},[a("v-icon",[t._v("photo")]),t._v(" Photos")],1),a("h3",[t._v(" Time: "+t._s(n.time)+" ")]),a("h3",[t._v(" On: "+t._s(t.date(n.date))+" ")]),a("h3",[t._v(" For "+t._s(n.numPeople)+" "+t._s(1===n.numPeople?"person":"people"))])])]),a("v-card-actions",[t.state.restaurant?t._e():a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(a){a.stopPropagation(),t.setForCancel(n)}}},[t._v("Cancel Booking")])],1)],1)})):a("h4",{staticClass:"nobook"},[t._v("\n  You have no bookings. \n")])],1)},o=[],r=a("oyJW"),i=(a("INYr"),a("a1Th"),a("VRzm"),a("uvVa")),s=a("wNa6"),c={name:"Bookings",title:"Bookings",components:{},data:function(){return{state:s["a"].state,active:null,bookings:[],dialog:!1,toCancel:{},currentUser:s["a"].state.currentUser,tabs:[{name:"All"},{name:"Past"},{name:"Future"}]}},methods:{date:function(t){return new Date(t.toString()).toString()},setForCancel:function(t){this.dialog=!0,this.toCancel=t},cancelBooking:function(){var t=this;Object(i["a"])(this.toCancel._id).then(function(){var n=t.bookings.findIndex(function(n){var a=n._id;return a===t.toCancel._id});t.bookings.splice(n,1),t.dialog=!1})},fetchBookings:function(t){var n=this,a={};"All"!==t&&(a.date=Object(r["a"])({},"Future"===t?"$gte":"$lte",Date.now())),this.state.restaurant||(a.userId=this.currentUser.uid),Object(i["c"])(a).then(function(t){return n.bookings=t})}},props:{msg:String},created:function(){var t=this,n={};this.state.restaurant||(n.userId=this.currentUser.uid),Object(i["c"])(n).then(function(n){return t.bookings=n})}},u=c,l=(a("LSxn"),a("KHd+")),d=Object(l["a"])(u,e,o,!1,null,"60cdee5a",null);n["default"]=d.exports},rFp3:function(t,n,a){},uvVa:function(t,n,a){"use strict";a.d(n,"b",function(){return i}),a.d(n,"c",function(){return s}),a.d(n,"a",function(){return c});var e=a("vDqi"),o=a.n(e),r="",i=function(t){return o()({method:"POST",url:"".concat(r,"/book"),headers:{"Content-Type":"application/json"},data:t})},s=function(t){return o.a.post("".concat(r,"/bookings"),{data:t}).then(function(t){var n=t.data;return n})},c=function(t){return o.a.delete("".concat(r,"/bookings"),{params:{id:t}})}}}]);
//# sourceMappingURL=2.5a677225.js.map