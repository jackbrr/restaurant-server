{"version":3,"sources":["webpack:///./src/routes/Bookings.vue?05fe","webpack:///./src/routes/Bookings.vue?5ab0","webpack:///src/routes/Bookings.vue","webpack:///./src/routes/Bookings.vue?8452","webpack:///./src/routes/Bookings.vue","webpack:///./src/api/bookingApis.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Bookings_vue_vue_type_style_index_0_id_60cdee5a_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","attrs","max-width","model","value","callback","$$v","dialog","expression","staticClass","_v","color","flat","nativeOn","click","$event","cancelBooking","dark","slider-color","active","_l","tab","key","name","ripple","on","fetchBookings","_s","bookings","length","booking","id","restaurant","src","thumb","height","_e","primary-title","location","address","cuisines","href","menu_url","photos_url","time","date","numPeople","state","stopPropagation","setForCancel","staticRenderFns","Bookingsvue_type_script_lang_js","title","components","data","store","toCancel","currentUser","tabs","methods","_date","Date","toString","_this","Object","bookingApis","_id","then","toRemove","findIndex","_ref","splice","_this2","params","defineProperty","now","userId","uid","props","msg","String","created","_this3","routes_Bookingsvue_type_script_lang_js","component","componentNormalizer","__webpack_exports__","API_URL","createBooking","axios__WEBPACK_IMPORTED_MODULE_0___default","method","url","headers","Content-Type","getBookings","a","post","concat","_ref2","bookingId","delete"],"mappings":"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","file":"js/2.5a677225.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bookings.vue?vue&type=style&index=0&id=60cdee5a&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bookings.vue?vue&type=style&index=0&id=60cdee5a&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-dialog',{attrs:{\"max-width\":\"290\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Cancel this booking?\")]),_c('v-card-text',[_vm._v(\"This cannot be undone.\")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"red\",\"flat\":\"flat\"},nativeOn:{\"click\":function($event){return _vm.cancelBooking($event)}}},[_vm._v(\"Cancel My Booking\")]),_c('v-btn',{attrs:{\"color\":\"default\",\"flat\":\"flat\"},nativeOn:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"Back\")])],1)],1)],1),_c('h1',[_vm._v(\" Bookings \")]),_c('v-tabs',{attrs:{\"dark\":\"\",\"slider-color\":\"yellow\"},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.tabs),function(tab){return _c('v-tab',{key:tab.name,attrs:{\"ripple\":\"\"},on:{\"click\":function($event){_vm.fetchBookings(tab.name)}}},[_vm._v(\"\\n      \"+_vm._s(tab.name)+\"\\n    \")])})),(_vm.bookings.length > 0)?_c('ul',_vm._l((_vm.bookings),function(booking){return _c('v-card',{key:booking.id},[(booking.restaurant.thumb)?_c('v-card-media',{attrs:{\"src\":booking.restaurant.thumb,\"height\":\"200px\"}}):_vm._e(),_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('div',[_c('h3',{staticClass:\"headline mb-0\"},[_vm._v(_vm._s(booking.restaurant.name))]),_c('h3',[_vm._v(\" \"+_vm._s(booking.restaurant.location.address)+\" \")]),_c('h3',[_vm._v(\" \"+_vm._s(booking.restaurant.cuisines)+\" \")]),_c('a',{attrs:{\"href\":booking.menu_url}},[_c('v-icon',[_vm._v(\"local_dining\")]),_vm._v(\" Menu\")],1),_c('br'),_c('a',{attrs:{\"href\":booking.photos_url}},[_c('v-icon',[_vm._v(\"photo\")]),_vm._v(\" Photos\")],1),_c('h3',[_vm._v(\" Time: \"+_vm._s(booking.time)+\" \")]),_c('h3',[_vm._v(\" On: \"+_vm._s(_vm.date(booking.date))+\" \")]),_c('h3',[_vm._v(\" For \"+_vm._s(booking.numPeople)+\" \"+_vm._s(booking.numPeople === 1 ? 'person' : 'people'))])])]),_c('v-card-actions',[(!_vm.state.restaurant)?_c('v-btn',{attrs:{\"color\":\"red\",\"dark\":\"\"},nativeOn:{\"click\":function($event){$event.stopPropagation();_vm.setForCancel(booking)}}},[_vm._v(\"Cancel Booking\")]):_vm._e()],1)],1)})):_c('h4',{staticClass:\"nobook\"},[_vm._v(\"\\n  You have no bookings. \\n\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n   <v-dialog v-model=\"dialog\" max-width=\"290\">\n      <v-card>\n        <v-card-title class=\"headline\">Cancel this booking?</v-card-title>\n        <v-card-text>This cannot be undone.</v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"red\" flat=\"flat\" @click.native=\"cancelBooking\">Cancel My Booking</v-btn>\n          <v-btn color=\"default\" flat=\"flat\" @click.native=\"dialog = false\">Back</v-btn>\n        </v-card-actions>\n      </v-card>\n   </v-dialog>\n  <h1> Bookings </h1>\n   <v-tabs\n      v-model=\"active\"\n      dark\n      slider-color=\"yellow\"\n    >\n      <v-tab\n        v-for=\"tab in tabs\"\n        :key=\"tab.name\"\n        @click=\"fetchBookings(tab.name)\"\n        ripple\n      >\n        {{ tab.name }}\n      </v-tab>\n    </v-tabs>\n  <ul v-if=\"bookings.length > 0\">\n   <v-card \n     v-for=\"booking in bookings\" \n     :key=\"booking.id\"\n   >\n      <v-card-media v-if=\"booking.restaurant.thumb\" :src=\"booking.restaurant.thumb\" height=\"200px\" />\n      <v-card-title primary-title>\n        <div>\n          <h3 class=\"headline mb-0\">{{ booking.restaurant.name }}</h3>\n          <h3> {{ booking.restaurant.location.address }} </h3>\n          <h3> {{ booking.restaurant.cuisines }} </h3>\n          <a :href=\"booking.menu_url\"><v-icon>local_dining</v-icon> Menu</a></br>\n           <a :href=\"booking.photos_url\"><v-icon>photo</v-icon> Photos</a>\n          <h3> Time: {{ booking.time }} </h3>\n          <h3> On: {{ date(booking.date) }} </h3>\n          <h3> For {{ booking.numPeople }} {{ booking.numPeople === 1 ? 'person' : 'people' }}</h3>\n        </div>\n      </v-card-title>\n      <v-card-actions>\n        <v-btn \n          v-if=\"!state.restaurant\"\n          color=\"red\" \n          dark \n          @click.native.stop=\"setForCancel(booking)\"\n        >Cancel Booking</v-btn>\n      </v-card-actions>\n    </v-card>\n  </ul>\n  <h4 class=\"nobook\" v-else>\n    You have no bookings. \n  </h4>\n  </div>\n</template>\n\n<script>\nimport { getBookings, cancelBooking } from '../api/bookingApis'; \nimport store from '../store';\n\nexport default {\n  name: 'Bookings',\n  title: 'Bookings',\n  components: {\n  },\n  data: () => ({ \n    state: store.state,\n    active: null,\n    bookings: [],\n    dialog: false,\n    toCancel: {},\n    currentUser: store.state.currentUser,\n    tabs: [\n      {\n        name: 'All'\n      },\n      {\n        name: 'Past'\n      },\n      {\n        name: 'Future'\n      }\n    ]\n  }),\n  methods: {\n    date(date) {\n      return new Date(date.toString()).toString();\n    },\n    setForCancel(booking) {\n      this.dialog = true;\n      this.toCancel = booking; \n    },\n    cancelBooking() {\n      cancelBooking(this.toCancel._id).then(() => {\n        const toRemove = this.bookings.findIndex(({ _id }) => _id === this.toCancel._id);\n        this.bookings.splice(toRemove, 1);\n        this.dialog = false;\n      })\n    },\n    fetchBookings(date) {\n      let params = {};\n      if (date !== 'All') {\n        params.date =  { [date === 'Future' ? '$gte' : '$lte']: Date.now() };\n      }\n      if (!this.state.restaurant) {\n        params.userId = this.currentUser.uid;\n      }\n      getBookings(params).then((bookings) => this.bookings = bookings);\n    }\n  },\n  props: {\n    msg: String\n  },\n  created() {\n    let params = {};\n    if (!this.state.restaurant) {\n      params.userId = this.currentUser.uid;\n    }\n    getBookings(params).then((bookings) => this.bookings = bookings);\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.nobook {\n  padding: 10px;\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bookings.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bookings.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Bookings.vue?vue&type=template&id=60cdee5a&scoped=true\"\nimport script from \"./Bookings.vue?vue&type=script&lang=js\"\nexport * from \"./Bookings.vue?vue&type=script&lang=js\"\nimport style0 from \"./Bookings.vue?vue&type=style&index=0&id=60cdee5a&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60cdee5a\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios';\n\nconst API_URL =\n  process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : '';\n\nconst createBooking = booking => {\n  return axios({\n    method: 'POST',\n    url: `${API_URL}/book`,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: booking\n  });\n};\n\nconst getBookingsDate = date => {\n  const params = date ? { params: { date } } : null;\n  return axios.get(`${API_URL}/bookings`, params).then(({ data }) => data);\n};\n\nconst getBookings = params => {\n  return axios.post(`${API_URL}/bookings`, { data: params }).then(({ data }) => data);\n};\n\nconst cancelBooking = bookingId => {\n  return axios.delete(`${API_URL}/bookings`, { params: { id: bookingId } });\n};\n\nexport { createBooking, getBookings, cancelBooking, getBookingsDate };\n"],"sourceRoot":""}